#!/bin/bash
# 环境与模块子菜单：tmux / ffmpeg / profile / xrkk 升级，可单独执行
# 文件名用 env_module 避免与系统 env 或 gitignore 常用规则冲突
[ -d /xrk ] || { echo "请先安装脚本仓库到 /xrk"; exit 1; }
source /xrk/shell_modules/color.sh 2>/dev/null || true
source /xrk/.init 2>/dev/null || true
[ -f /xrk/shell_modules/menu_common.sh ] && source /xrk/shell_modules/menu_common.sh

while true; do
    echo ""
    menu_show "环境与模块" "  " "安装/配置 tmux" "安装 ffmpeg" "配置 .profile" "升级 xrkk 到 bin" "Python + uv" "返回"
    echo ""
    read -rp "请选择 [0-${MENU_OPT_COUNT:-6}]: " c
    c=$(echo "$c" | tr -d '[:space:]' | tr '[:upper:]' '[:lower:]')
    [ "$c" = "0" ] || [ "$c" = "q" ] || [ "$c" = "${MENU_OPT_COUNT:-6}" ] && exit 0
    case "$c" in
        1) bash /xrk/body/modules/tmux ;;
        2) bash /xrk/body/modules/ffmpeg ;;
        3) bash /xrk/body/modules/profile ;;
        4) cat /xrk/body/Linux > /usr/local/bin/xrkk && chmod 755 /usr/local/bin/xrkk && echo "xrkk 已更新" ;;
        5) bash /xrk/body/modules/python_uv ;;
        *) echo "无效选择" ;;
    esac
done
